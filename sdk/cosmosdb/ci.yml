# DO NOT EDIT THIS FILE
# This file is generated automatically and any changes will be lost.

trigger:
  branches:
    include:
      - master
      - feature/*
  paths:
    include:
      - sdk/cosmosdb/

pr:
  branches:
    include:
      - master
      - feature/*
  paths:
    include:
      - sdk/cosmosdb/

jobs:
  - template: ../../eng/pipelines/templates/jobs/archetype-sdk-client.yml
    parameters:
      # Unit-tests are being skipped, the huge matrix with different variations is not needed
      Matrix:
        Linux_Node10:
          OSVmImage: "ubuntu-16.04"
          TestType: "node"
      ServiceDirectory: cosmosdb

  - template: ../../eng/pipelines/templates/jobs/archetype-sdk-integration.yml
    parameters:
      PackagePath: "sdk/cosmosdb/cosmos/"
      PackageName: "@azure/cosmos"
      Toolchain: rush
      Matrix:
        Windows_Node8:
          OSVmImage: "vs2017-win2016"
          NodeVersion: "8.x"
          TestType: "node"
      PreIntegrationSteps: cosmos-integration-public
      PostIntegrationSteps: cosmos-additional-steps
      EnvVars:
        ACCOUNT_HOST: $(CosmosDbEmulator.Endpoint)
        MOCHA_TIMEOUT: 100000
        NODE_TLS_REJECT_UNAUTHORIZED: 0
